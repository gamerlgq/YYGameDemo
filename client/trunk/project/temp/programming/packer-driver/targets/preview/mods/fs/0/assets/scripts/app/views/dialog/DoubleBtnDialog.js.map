{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/views/dialog/DoubleBtnDialog.ts"],"names":["_decorator","Label","RichText","Button","sceneMgr","LayerBase","ccclass","property","DoubleBtnDialog","start","node","_uiProps","localOpacity","updateDialog","args","_args","title","msg","updateTitle","updateMessage","updateLeftButton","updateRightButton","lblTitle","string","match","lblMessage","leftBtnName","name","lblBtn","btnLeft","getComponentInChildren","hideLeftButton","active","rightBtnName","btnRight","btnLeftClick","event","customEventData","leftCallback","close","btnRightClick","rightCallback","isNotCloseDialog","_addType","destroy","popTableLayer","removeDialog","setAddType","addType"],"mappings":"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","sourcesContent":["/*\n * @Author: liuguoqing\n * @Date: 2022-03-03 20:29:40\n * @LastEditors: liuguoqing\n * @LastEditTime: 2022-03-03 20:47:45\n * @Description: file content\n */\n\nimport { _decorator, Component, Label, RichText, Button } from 'cc';\nimport { sceneMgr } from '../../../framework/core/SceneMgr';\nimport { LayerBase } from '../../../framework/ui/LayerBase';\nconst { ccclass, property } = _decorator;\n\nexport type DoubleDialogArgsType = {\n    title?: string;\n    msg?: string;\n    leftBtnName?: string;\n    rightBtnName?: string;\n    leftCallback?: () => void;\n    rightCallback?: () => void;\n    hideLeftButton?: boolean;\n    newGuide?: boolean;\n}\n\n@ccclass('DoubleBtnDialog')\nexport class DoubleBtnDialog extends LayerBase {\n\n    static DoubleDialogArgs:DoubleDialogArgsType = {}\n\n    @property(Label)\n    lblTitle: Label = null;\n\n    @property(RichText)\n    lblMessage: RichText = null;\n\n    @property(Button)\n    btnLeft: Button = null;\n\n    @property(Button)\n    btnRight: Button = null;\n\n    private _args: any;\n    private _addType: number = 0;\n\n    start () {\n        // this.updateDialog();\n        this.node._uiProps.localOpacity = 0\n    }\n\n    updateDialog(args:DoubleDialogArgsType) {\n        this._args = args;\n        this._args.title = args.title || \"\";\n        this._args.msg = args.msg || \"\";\n\n        this.updateTitle();\n        this.updateMessage();\n        this.updateLeftButton();\n        this.updateRightButton();\n    }\n\n    updateTitle() {\n        this.lblTitle.string = this._args.title;\n    }\n\n    updateMessage() {\n        let msg = this._args.msg;\n        if (!this._args.msg.match(\"</color>\")) {\n            msg =\n                \"<outline color=black width=2><color=#FFFFFF>\" +\n                this._args.msg +\n                \"</color></outline>\";\n        }\n        this.lblMessage.string = msg;\n    }\n\n    updateLeftButton() {\n        if (this._args.leftBtnName) {\n            let name = this._args.leftBtnName;\n            let lblBtn = this.btnLeft.getComponentInChildren(Label);\n            lblBtn = name;\n        }\n\n        if (this._args.hideLeftButton) {\n            this.btnLeft.node.active = false;\n            // this.btnRight.node.x = 0;\n        }\n    }\n\n    updateRightButton() {\n        if (this._args.rightBtnName) {\n            let name = this._args.rightBtnName;\n            let lblBtn = this.btnRight.getComponentInChildren(Label);\n            lblBtn.string = name;\n        }\n    }\n\n    btnLeftClick(event, customEventData) {\n        if (this._args.leftCallback) {\n            this._args.leftCallback();\n        }\n        this.close();\n    }\n\n    btnRightClick(event, customEventData) {\n        if (this._args.rightCallback) {\n            let isNotCloseDialog = this._args.rightCallback();\n            //不关闭对话框\n            if (isNotCloseDialog) {\n                return;\n            }\n        }\n        this.close();\n    }\n\n    close() {\n        if (this._addType == 1) {\n            this.node.destroy();\n        } else if (this._addType == 2) {\n            sceneMgr.popTableLayer();\n        } else {\n            sceneMgr.removeDialog();\n        }\n    }\n\n    setAddType(addType: number) {\n        this._addType = addType;\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/zh/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}