{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/framework/components/SingletonMgr.ts"],"names":["SingletonMgr","getInstance","_instance","constructor","_singletonList","sign","T","_index","sIndex","push","unSign","i","length","s","_sIndex","splice","destoryAll","singleton","pop","clear","destoryInstance","instance","singletonMgr"],"mappings":";;;iBAOMA,Y;;;;;;;;;;;;;AAPN;AACA;AACA;AACA;AACA;AACA;AACA;AACMA,MAAAA,Y,GAAN,MAAMA,YAAN,CAAmB;AAMG,eAAXC,WAAW,GAAM;AACpB,cAAI,KAAKC,SAAL,IAAkB,IAAtB,EAA4B;AACxB,iBAAKA,SAAL,GAAiB,IAAIF,YAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKE,SAAZ;AACH;;AAEOC,QAAAA,WAAW,GAAG;AAAA,0CAVG,CAUH;;AAAA;;AAClB,eAAKC,cAAL,GAAsB,EAAtB;AACH;;AAEDC,QAAAA,IAAI,CAACC,CAAD,EAAS;AACT,eAAKC,MAAL;AACAD,UAAAA,CAAC,CAACE,MAAF,GAAW,KAAKD,MAAhB;;AACA,eAAKH,cAAL,CAAoBK,IAApB,CAAyBH,CAAzB;AACH;;AAEDI,QAAAA,MAAM,CAACJ,CAAD,EAAS;AACX,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKP,cAAL,CAAoBQ,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;AACjD,gBAAIE,CAAC,GAAG,KAAKT,cAAL,CAAoBO,CAApB,CAAR;;AACA,gBAAIE,CAAC,CAACC,OAAF,IAAaR,CAAC,CAACE,MAAnB,EAA2B;AACvB,mBAAKJ,cAAL,CAAoBW,MAApB,CAA2BJ,CAA3B,EAA8B,CAA9B;;AACAA,cAAAA,CAAC;AACD;AACH;AACJ;AACJ;;AAEDK,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAKZ,cAAL,CAAoBQ,MAApB,GAA6B,CAApC,EAAuC;AACnC,gBAAIK,SAAS,GAAG,KAAKb,cAAL,CAAoBc,GAApB,EAAhB;;AACAD,YAAAA,SAAS,CAACE,KAAV;AACAF,YAAAA,SAAS,CAACG,eAAV;AACAH,YAAAA,SAAS,CAACI,QAAV,GAAqB,IAArB;AACH;AACJ;;AAEDF,QAAAA,KAAK,GAAE;AACH,kCAAAG,YAAY,GAAG,IAAf;AACH;;AA7Cc,O,EAgDnB;;sBAhDMtB,Y;;8BAiDKsB,Y,GAAe,CAAC,MAAI;AAC3B,eAAOtB,YAAY,CAACC,WAAb,EAAP;AACH,OAFyB,G","sourcesContent":["/*\n * @Author: liuguoqing\n * @Date: 2022-03-02 16:35:22\n * @LastEditors: liuguoqing\n * @LastEditTime: 2022-03-20 20:52:15\n * @Description: file content\n */\nclass SingletonMgr {\n    static _instance: any;\n\n    private _index: number = 0;\n    private _singletonList: Array<any>;\n\n    static getInstance<T>() {\n        if (this._instance == null) {\n            this._instance = new SingletonMgr();\n        }\n        return this._instance;\n    }\n\n    private constructor() {\n        this._singletonList = [];\n    }\n\n    sign(T: any) {\n        this._index++;\n        T.sIndex = this._index;\n        this._singletonList.push(T);\n    }\n\n    unSign(T: any) {\n        for (let i = 0; i < this._singletonList.length; i++) {\n            let s = this._singletonList[i];\n            if (s._sIndex == T.sIndex) {\n                this._singletonList.splice(i, 1);\n                i--;\n                break;\n            }\n        }\n    }\n\n    destoryAll() {\n        while (this._singletonList.length > 0) {\n            let singleton = this._singletonList.pop();\n            singleton.clear();\n            singleton.destoryInstance();\n            singleton.instance = null;\n        }\n    }\n\n    clear(){\n        singletonMgr = null;\n    }\n}\n\n// ()();\nexport let singletonMgr = (()=>{\n    return SingletonMgr.getInstance<SingletonMgr>();\n})();"]}