{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/views/fight/FightBloodMgr.ts"],"names":["FightBloodMgr","Singleton","FightEvent","fightEventMgr","FightConstant","fightBloodMgr","init","mainLayer","getInstance","_init","_fightMainLayer","_fightMainWorld","getFightMainWorld","_initListeners","check","data","result","resultActionId","FightReultAction","Action_HP","_sendEvent","args","Data","send","Blood_Change","destory","destoryInstance","clear"],"mappings":";;;mFAUaA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVJC,MAAAA,S,iBAAAA,S;;AAEAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;+BAIEC,a,GAA8B,I;;+BAC5BL,a,GAAN,MAAMA,aAAN;AAAA;AAAA,kCAAsC;AAAA;AAAA;;AAAA,mDAEA,IAFA;;AAAA,mDAIA,IAJA;AAAA;;AAMzC;AACJ;AACA;AACuB,eAAJM,IAAI,CAACC,SAAD,EAA2B;AAC1C,mCAAAF,aAAa,GAAGL,aAAa,CAACQ,WAAd,EAAhB;;AACAH,UAAAA,aAAa,CAACI,KAAd,CAAoBF,SAApB;AACH;;AAEOE,QAAAA,KAAK,CAACF,SAAD,EAA2B;AACpC,eAAKG,eAAL,GAAuBH,SAAvB;AACA,eAAKI,eAAL,GAAuB,KAAKD,eAAL,CAAqBE,iBAArB,EAAvB;;AACA,eAAKC,cAAL;AACH;;AAEOA,QAAAA,cAAc,GAAG,CAExB;AAED;AACJ;AACA;;;AACWC,QAAAA,KAAK,CAACC,IAAD,EAAuB;AAC/B,cAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;AACA,cAAIC,cAAc,GAAGD,MAAM,CAAC,CAAD,CAA3B;;AACA,cAAIC,cAAc,IAAI;AAAA;AAAA,8CAAcC,gBAAd,CAA+BC,SAArD,EAAgE;AAC5D,iBAAKC,UAAL,CAAgBL,IAAhB;AACH;AACJ;;AAEOK,QAAAA,UAAU,CAACL,IAAD,EAAuB;AAAA;;AACrC,cAAIM,IAAoC,GAAG;AACvCC,YAAAA,IAAI,EAAEP;AADiC,WAA3C;AAGA;AAAA;AAAA,0FAAeQ,IAAf,CAAoB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAcrB,UAAd,CAAyBsB,YAAxC,EAAqDH,IAArD,CAApB;AACH;;AAEMI,QAAAA,OAAO,GAAE;AACZzB,UAAAA,aAAa,CAAC0B,eAAd;AACH;;AAEMC,QAAAA,KAAK,GAAE;AACV,mCAAAtB,aAAa,GAAG,IAAhB;AACH;;AAhDwC,O","sourcesContent":["import { Singleton } from \"../../../framework/components/Singleton\";\nimport { FightActionData } from \"./action/FightActionMgr\";\nimport { FightEvent } from \"./event/FightEvent\";\nimport { FightEventDataType } from \"./event/FightEventDataType\";\nimport { fightEventMgr } from \"./event/FightEventMgr\";\nimport { FightConstant } from \"./FightConstant\";\nimport { FightMainLayer } from \"./FightMainLayer\";\nimport { FightMainWorld } from \"./FightMainWorld\";\n\nexport let fightBloodMgr:FightBloodMgr = null;\nexport class FightBloodMgr extends Singleton {\n    \n    private _fightMainLayer:FightMainLayer = null;\n\n    private _fightMainWorld:FightMainWorld = null;\n\n    /**\n     * init\n     */\n     public static init(mainLayer:FightMainLayer) {\n        fightBloodMgr = FightBloodMgr.getInstance<FightBloodMgr>();\n        fightBloodMgr._init(mainLayer);\n    }\n\n    private _init(mainLayer:FightMainLayer) {\n        this._fightMainLayer = mainLayer;\n        this._fightMainWorld = this._fightMainLayer.getFightMainWorld();\n        this._initListeners();\n    }\n\n    private _initListeners() {\n\n    }\n\n    /**\n     * check\n     */\n    public check(data:FightActionData) {\n        let result = data.result;\n        let resultActionId = result[0];\n        if (resultActionId == FightConstant.FightReultAction.Action_HP) {\n            this._sendEvent(data);\n        }\n    }\n\n    private _sendEvent(data:FightActionData) {\n        let args:FightEventDataType.Blood_Change = {\n            Data: data\n        }\n        fightEventMgr?.send(new FightEvent(FightConstant.FightEvent.Blood_Change,args));\n    }\n\n    public destory(){\n        FightBloodMgr.destoryInstance();\n    }\n\n    public clear(){\n        fightBloodMgr = null;\n    }\n}"]}