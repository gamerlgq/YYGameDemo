{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/views/fight/data/FightDataMgr.ts"],"names":["FightDataMgr","Singleton","Parse","report","clas","fightDataMgr","init","getInstance","parse","isNotCache","rp","_reportData","getFightData","destory","destoryInstance","clear"],"mappings":";;;yCAgBaA,Y;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,S,iBAAAA,S;;;;;;;AAGHC,MAAAA,K,GAAQ,CAAiCC,MAAjC,EAAkDC,IAAlD,KACN,IAAIA,IAAJ,CAASD,MAAT,C;;8BAEGE,Y,GAA4B,I;;8BAE1BL,Y,GAAN,MAAMA,YAAN;AAAA;AAAA,kCAAoC;AAAA;AAAA;;AAAA;AAAA;;AAIrB,eAAJM,IAAI,GAAE;AAChB,kCAAAD,YAAY,GAAGL,YAAY,CAACO,WAAb,EAAf;AACH;AAED;AACJ;AACA;AACA;;;AACWC,QAAAA,KAAK,CAAiCL,MAAjC,EAAkDC,IAAlD,EAAyDK,UAAzD,EAA6F;AACrG,cAAIC,EAAE,GAAGR,KAAK,CAACC,MAAD,EAAQC,IAAR,CAAd,CADqG,CAErG;;AACA,cAAI,CAACK,UAAL,EAAgB;AACZ,iBAAKE,WAAL,GAAmBD,EAAnB;AACA,iBAAKC,WAAL;AACH;;AACD,iBAAOD,EAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACWE,QAAAA,YAAY,CAAiCR,IAAjC,EAAyD;AACxE,iBAAO,KAAKO,WAAZ;AACH;;AAEME,QAAAA,OAAO,GAAE;AACZb,UAAAA,YAAY,CAACc,eAAb;AACH;;AAEMC,QAAAA,KAAK,GAAG;AACX,kCAAAV,YAAY,GAAG,IAAf;AACH;;AArCsC,O","sourcesContent":["/*\n * @Author: liuguoqing\n * @Date: 2022-03-19 11:17:19\n * @LastEditors: liuguoqing\n * @LastEditTime: 2022-03-20 23:09:19\n * @Description: file content\n */\nimport { JsonAsset } from \"cc\";\nimport { Singleton } from \"../../../../framework/components/Singleton\";\nimport { FightDataBase } from \"./FightDataBase\";\n\nconst Parse = <T extends typeof FightDataBase>(report:JsonAsset,clas:T) => \n        new clas(report) as InstanceType<T>;\n\nexport let fightDataMgr:FightDataMgr = null;\n\nexport class FightDataMgr extends Singleton{\n\n    private _reportData:any;\n    \n    public static init(){\n        fightDataMgr = FightDataMgr.getInstance<FightDataMgr>();\n    }\n    \n    /**\n     * @description 解析战报\n     * @param data 战报数据\n     */\n    public parse<T extends typeof FightDataBase>(report:JsonAsset,clas:T,isNotCache?:boolean):InstanceType<T>{\n        let rp = Parse(report,clas);\n        // 默认缓存\n        if (!isNotCache){\n            this._reportData = rp;\n            this._reportData as InstanceType<T>;\n        }\n        return rp\n    }\n\n    /**\n     * \n     * @param clas T extends typeof FightDataBase\n     * @returns intstances of clas\n     */\n    public getFightData<T extends typeof FightDataBase>(clas:T):InstanceType<T> {\n        return this._reportData;\n    }\n\n    public destory(){\n        FightDataMgr.destoryInstance();\n    }\n\n    public clear() {\n        fightDataMgr = null;\n    }\n}"]}