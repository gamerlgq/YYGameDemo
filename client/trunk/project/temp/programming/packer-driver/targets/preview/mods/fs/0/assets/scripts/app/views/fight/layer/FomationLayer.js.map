{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/app/views/fight/layer/FomationLayer.ts"],"names":["FomationLayer","instantiate","Prefab","ResourcesLoader","viewRegisterMgr","FormationView","FightLayerBase","init","prefab","_loadPrefab","node","addChild","_fomationCom","getComponentInChildren","viewInfo","getViewInfo","loadPromise","Path","getAttackPosByIndex","index","getDefendPosByIndex"],"mappings":";;;oHAMaA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AANGC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;;AACpBC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;+BAEIN,a,GAAN,MAAMA,aAAN;AAAA;AAAA,4CAA2C;AAAA;AAAA;;AAAA,gDAET,IAFS;AAAA;;AAIjCO,QAAAA,IAAI,GAAE;AAAA;;AAAA;AACf,gBAAIC,MAAM,SAAS,KAAI,CAACC,WAAL,EAAnB;AACA,gBAAIC,IAAI,GAAGT,WAAW,CAACO,MAAD,CAAtB;;AACA,YAAA,KAAI,CAACE,IAAL,CAAUC,QAAV,CAAmBD,IAAnB;;AACA,YAAA,KAAI,CAACE,YAAL,GAAoB,KAAI,CAACF,IAAL,CAAUG,sBAAV;AAAA;AAAA,+CAApB;AAJe;AAKlB;;AAEaJ,QAAAA,WAAW,GAAmB;AAAA;AACxC,gBAAIK,QAAQ,GAAG;AAAA;AAAA,oDAAgBC,WAAhB,CAA4B,WAA5B,EAAwC,eAAxC,CAAf;AACA,mBAAO;AAAA;AAAA,oDAAgBC,WAAhB,CAA4BF,QAAQ,CAACG,IAArC,EAA0Cf,MAA1C,CAAP;AAFwC;AAG3C;AAED;AACJ;AACA;AACA;AACA;;;AACWgB,QAAAA,mBAAmB,CAACC,KAAD,EAAmB;AACzC,iBAAO,KAAKP,YAAL,CAAkBM,mBAAlB,CAAsCC,KAAtC,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACWC,QAAAA,mBAAmB,CAACD,KAAD,EAAmB;AACzC,iBAAO,KAAKP,YAAL,CAAkBQ,mBAAlB,CAAsCD,KAAtC,CAAP;AACH;;AAhC6C,O","sourcesContent":["import { Asset, instantiate, Prefab, Vec3 } from \"cc\";\nimport { ResourcesLoader } from \"../../../../framework/data/ResourcesLoader\";\nimport { viewRegisterMgr } from \"../../../define/ViewRegisterMgr\";\nimport { FormationView } from \"../../formation/FormationView\";\nimport { FightLayerBase } from \"./FightLayerBase\";\n\nexport class FomationLayer extends FightLayerBase {\n\n    private _fomationCom:FormationView = null;\n\n    public async init(){\n        let prefab = await this._loadPrefab();\n        let node = instantiate(prefab);\n        this.node.addChild(node);\n        this._fomationCom = this.node.getComponentInChildren(FormationView);\n    }\n\n    private async _loadPrefab():Promise<Prefab> {\n        let viewInfo = viewRegisterMgr.getViewInfo(\"formation\",\"FormationView\");\n        return ResourcesLoader.loadPromise(viewInfo.Path,Prefab);\n    }\n\n    /**\n     * \n     * @description 获取攻方部队索引值 (左)\n     * @param index 部队所引致\n     */\n    public getAttackPosByIndex(index:number):Vec3{\n        return this._fomationCom.getAttackPosByIndex(index);\n    }\n    \n    /**\n     * \n     * @description 获取守方部队索引值 (右)\n     * @param index 部队所引致\n     */\n    public getDefendPosByIndex(index:number):Vec3{\n        return this._fomationCom.getDefendPosByIndex(index);\n    }\n}"]}