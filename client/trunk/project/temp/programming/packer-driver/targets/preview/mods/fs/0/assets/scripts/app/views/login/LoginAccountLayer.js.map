{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/app/views/login/LoginAccountLayer.ts"],"names":["_decorator","EditBox","sceneMgr","storage","LayerBase","G","ccclass","property","LoginAccountLayer","onLoad","start","userName","get","editAccount","string","pwd","editPassword","onEditDirectLoginEnded","editbox","customEventData","onClickRegBtn","showMsgTips","onClickLoginBtn","passWord","_login","set","_checkShowIDVerify","userId","_showNotice","popTableLayer","showNotice"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,O,OAAAA,O;;AAE7BC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,O,iBAAAA,O;;AAGAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,C,iBAAAA,C;;;;;;;OAIH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;mCAIjBQ,iB,WADZF,OAAO,CAAC,mBAAD,C,UAOHC,QAAQ,CAACN,OAAD,C,UAGRM,QAAQ,CAACN,OAAD,C,UAGRM,QAAQ,CAACN,OAAD,C,oCAbb,MACaO,iBADb;AAAA;AAAA,kCACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAE7CC,QAAAA,MAAM,GAAE;AACJ,gBAAMA,MAAN;AACH;;AAWDC,QAAAA,KAAK,GAAI;AACL,cAAIC,QAAQ,GAAG;AAAA;AAAA,kCAAQC,GAAR,CAAY,eAAZ,CAAf;;AACA,cAAID,QAAJ,EAAc;AACV,iBAAKE,WAAL,CAAiBC,MAAjB,GAA0BH,QAA1B;AACH;;AACD,cAAII,GAAG,GAAG;AAAA;AAAA,kCAAQH,GAAR,CAAY,eAAZ,CAAV;;AACA,cAAIG,GAAJ,EAAQ;AACJ,iBAAKC,YAAL,CAAkBF,MAAlB,GAA2BC,GAA3B;AACH;AACJ;;AAEDE,QAAAA,sBAAsB,CAACC,OAAD,EAAUC,eAAV,EAA2B,CAC7C;AACA;AACA;AACH;;AAEDC,QAAAA,aAAa,GAAE;AACX;AAAA;AAAA,sBAAEC,WAAF,CAAc,OAAd;AACH;;AAEDC,QAAAA,eAAe,GAAE;AACb,cAAIX,QAAQ,GAAG,KAAKE,WAAL,CAAiBC,MAAhC;AACA,cAAIS,QAAQ,GAAG,KAAKP,YAAL,CAAkBF,MAAjC;;AAEA,cAAIH,QAAQ,IAAI,EAAhB,EAAoB;AAChB;AAAA;AAAA,wBAAEU,WAAF,CAAc,SAAd;AACA;AACH;;AACD,cAAIE,QAAQ,IAAI,EAAhB,EAAoB;AAChB;AAAA;AAAA,wBAAEF,WAAF,CAAc,SAAd;AACA;AACH;;AAED,eAAKG,MAAL,CAAYb,QAAZ,EAAsBY,QAAtB;AACH;;AAEOC,QAAAA,MAAM,CAACb,QAAD,EAAWY,QAAX,EAAoB;AAC1B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;AAAA;AAAA,kCAAQE,GAAR,CAAY,eAAZ,EAA6Bd,QAA7B;AACA;AAAA;AAAA,kCAAQc,GAAR,CAAY,eAAZ,EAA6BF,QAA7B,EAVc,CAW9B;AACgB;AACA;AACA;AACA;AACA;;AACA,eAAKG,kBAAL,CAAwB,CAAxB,EAjBc,CAiBa;AAC/B;AACI;AACJ;AACJ;AACJ;AACA;AACA;AACI;AACA;AACJ;AACJ;;AACH,SAjF4C,CAmF7C;;;AACQA,QAAAA,kBAAkB,CAACC,MAAD,EAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;AACJ;AACJ;AACJ;AACI;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,eAAKC,WAAL,GAxC2B,CAyC/B;AACJ;AACI;AACI;AACI;AACJ;AACJ;AACJ;AACJ;;AACH;;AAEOA,QAAAA,WAAW,GAAG;AAClB;AAAA;AAAA,oCAASC,aAAT;AACA;AAAA;AAAA,sBAAEC,UAAF;AACH;;AA3I4C,O;;;;;iBAOzB,I;;;;;;;iBAGC,I;;;;;;;iBAGG,I","sourcesContent":["\nimport { _decorator, Component, Node, EditBox, log, sys, game, UITransform } from 'cc';\nimport { gameMgr } from '../../../framework/core/GameMgr';\nimport { sceneMgr } from '../../../framework/core/SceneMgr';\nimport { storage } from '../../../framework/core/storage/Storage';\nimport { httpMgr } from '../../../framework/net/HttpMgr';\nimport { socketMgr } from '../../../framework/net/SocketMgr';\nimport { LayerBase } from '../../../framework/ui/LayerBase';\nimport { G } from '../../common/GlobalFunction';\nimport { Protocol } from '../../define/define';\nimport { ViewProtocol } from '../../define/ViewProtocol';\nimport { ModelLogin } from '../../model/ModelLogin';\nconst { ccclass, property } = _decorator;\n\n \n@ccclass('LoginAccountLayer')\nexport class LoginAccountLayer extends LayerBase {\n\n    onLoad(){\n        super.onLoad();\n    }\n\n    @property(EditBox)\n    editAccount:EditBox=null;\n\n    @property(EditBox)\n    editPassword:EditBox=null;\n\n    @property(EditBox)\n    editDirectLogin:EditBox=null;\n\n    start () {\n        let userName = storage.get(\"LoginUserName\");\n        if (userName) {\n            this.editAccount.string = userName;\n        }\n        let pwd = storage.get(\"LoginPassWord\");\n        if (pwd){\n            this.editPassword.string = pwd;\n        }\n    }\n\n    onEditDirectLoginEnded(editbox, customEventData) {\n        //登录串\n        // let directLoginKey = this.editDirectLogin.string;\n        // gameMgr.getModel(ModelLogin).setDirectLoginKey(directLoginKey);\n    }\n\n    onClickRegBtn(){\n        G.showMsgTips(\"暂未开启!\");\n    }\n\n    onClickLoginBtn(){\n        let userName = this.editAccount.string;\n        let passWord = this.editPassword.string;\n\n        if (userName == \"\") {\n            G.showMsgTips(\"账号不能为空!\");\n            return;\n        }\n        if (passWord == \"\") {\n            G.showMsgTips(\"密码不能为空!\");\n            return;\n        }\n\n        this._login(userName, passWord);\n    }\n\n    private _login(userName, passWord){\n            //@ts-ignore\n        // let url = GameConfig.ServerUrl + \"/client/login\";\n        // httpMgr.post(\n        //     (msg) => {\n        //         log(msg);\n        //         if (msg.code == 0) {\n        //             log(msg.data);\n        //             if (msg.data.result_code == 0) {\n                        storage.set(\"LoginUserName\", userName);\n                        storage.set(\"LoginPassWord\", passWord);\n        //                 let model = gameMgr.getModel(ModelLogin);\n                        // model.setLoginData(msg.data);\n                        // sceneMgr.removeTableLayer();\n                        // sceneMgr.sendCreateView()\n                        // GlobalFunction.ShowMsgTips(GetTranslateCode(174));\n                        //打点\n                        this._checkShowIDVerify(0);//msg.data.user_id);\n                    // } else {\n                        // GlobalFunction.ShowMsgTips(msg.data.msg);\n                    // }\n                // }\n            // },\n            // url,\n            // {\n                // username: userName,\n                // password: passWord,\n            // }\n        // );\n    }\n\n    // 实名认证\n    private _checkShowIDVerify(userId: number) {\n        // 实名验证开关\n        // let sw = storage.get(\"idcard_verify\");\n        // if (sw == null || sw == undefined) {\n        //     sw = 1;\n        // }\n        // if (sw == 0) {\n        //     this._showNotice();\n        //     return;\n        // }\n\n        //@ts-ignore\n        // let url = GameConfig.ServerUrl + \"/client/is_verify?youai_id=\" + userId;\n        // httpMgr.get((msg) => {\n        //     log(msg);\n        //     let code = msg.data.code;\n        //     if (code == 1) {\n        //         // 1提交了没出结果\n        //         sceneMgr.sendCreateView(ViewProtocol.IDCardWaitTips, {\n        //             callback: () => {\n                        // this._showNotice();\n                    // },\n                // });\n            // } else if (code == 2) {\n                // \"code\": -1后台出错 0没记录需要提交 1提交了没出结果 2认证通过(才有下面数据) 3认证不通过\n                // \"birthday\" \"1999-01-01'\n                // \"age\": 年龄\n                // msg.age = 17;\n\n                // if (msg.data.age < 18) {\n                //     let args = {\n                //         msg: GetTranslateCode(170),\n                //         hideLeftButton: true,\n                //         rightBtnName: GetTranslateCode(136),\n                //         rightCallback: () => {\n                //             sceneMgr.sendCreateView(ViewProtocol.AccountLayer);\n                //         },\n                //     };\n                //     G.ShowDoubleBtnDialog(args);\n                // } else {\n                    this._showNotice();\n                // }\n            // } else {\n                // sceneMgr.endCreateView(ViewProtocol.IDCardLayer, {\n                    // callback: () => {\n                        // this._showNotice();\n                    // },\n                // });\n            // }\n        // }, url);\n    }\n\n    private _showNotice() {\n        sceneMgr.popTableLayer();\n        G.showNotice();\n    }\n}\n"]}