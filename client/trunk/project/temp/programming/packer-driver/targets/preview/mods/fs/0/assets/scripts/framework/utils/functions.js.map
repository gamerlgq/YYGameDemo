{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/framework/utils/functions.ts"],"names":["setNodeVisible","node","isVisible","active","posAdd","offPos","minX","maxX","minY","maxY","position","add","v3","x","y","showRedPoint","isShow","comp","getComponentInChildren","e","v2ToV3","v2","v3ToV2","encodeUtf8","text","code","encodeURIComponent","bytes","i","length","c","charAt","hex","hexVal","parseInt","push","charCodeAt","decodeUtf8","encoded","toString","decodeURIComponent","str2ab","str","buf","ArrayBuffer","bufView","Uint16Array","strLen","RedPoint","Logger"],"mappings":"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","sourcesContent":["/*\n * @Author: liuguoqing\n * @Date: 2022-03-04 23:09:26\n * @LastEditors: liuguoqing\n * @LastEditTime: 2022-03-05 15:11:03\n * @Description: file content \n */\nimport { Node, UIOpacity, v2, v3, Vec2, Vec3 } from \"cc\"\nimport { RedPoint } from \"../../app/views/common/RedPoint\"\nimport Logger from \"./Logger\"\n\nexport function setNodeVisible(node: Node, isVisible: boolean) {\n    // let opComp = node.addComponent(UIOpacity)\n    // opComp.opacity = isVisible ? 255:0\n    node.active = isVisible\n}\n\nexport function posAdd(node: Node, offPos: Vec2, minX?: number, maxX?: number, minY?: number, maxY?: number) {\n    node.position = node.position.add(v3(offPos.x, offPos.y))\n    let x, y\n    if (minX && node.position.x < minX) {\n        x = minX\n    }\n    if (maxX && node.position.x > maxX) {\n        x = maxX\n    }\n\n    if (minY && node.position.y < minY) {\n        y = minY\n    }\n\n    if (maxY && node.position.y > maxY) {\n        y = maxY\n    }\n\n    node.position = v3(x || node.position.x, y || node.position.y)\n}\n\n/**\n * 递归找到node节点的红点节点，并显示/隐藏\n * @param node \n * @param isShow \n */\nexport function showRedPoint(node: Node, isShow: boolean) {\n    let comp = node.getComponentInChildren(RedPoint)\n    if (!comp) {\n        Logger.e(\"找不到红点节点\")\n        return\n    }\n    comp.node.active = isShow\n}\n\nexport function v2ToV3(v2: Vec2) {\n    return v3(v2.x, v2.y, 0)\n}\n\nexport function v3ToV2(v3: Vec3) {\n    return v2(v3.x, v3.y)\n}\n\n/**\n * 把字符串序列化UTF8字节流\n * @param text \n * @returns \n */\nexport function encodeUtf8(text) {\n    const code = encodeURIComponent(text);\n    const bytes = [];\n    for (var i = 0; i < code.length; i++) {\n        const c = code.charAt(i);\n        if (c === '%') {\n            const hex = code.charAt(i + 1) + code.charAt(i + 2);\n            const hexVal = parseInt(hex, 16);\n            bytes.push(hexVal);\n            i += 2;\n        } else bytes.push(c.charCodeAt(0));\n    }\n    return bytes;\n}\n\n//反序列化UFT8字节 =>字符串\nexport function decodeUtf8(bytes) {\n    var encoded = \"\";\n    for (var i = 0; i < bytes.length; i++) {\n        encoded += '%' + bytes[i].toString(16);\n    }\n    return decodeURIComponent(encoded);\n}\n\n/**\n * 字符串转为ArrayBuffer对象\n * @param str 字符串\n * @returns \n */\nexport function str2ab(str:string) {\n    var buf = new ArrayBuffer(str.length * 2); // 每个字符占用2个字节\n    var bufView = new Uint16Array(buf);\n    for (var i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n}\n\n"]}