{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/framework/ui/TableLayer.ts"],"names":["TableLayer","Node","Widget","widgetManager","TableContentLayer","constructor","widget","addComponent","alignMode","AlignMode","ON_WINDOW_RESIZE","alignFlags","AlignFlags","HORIZONTAL","VERTICAL","left","right","bottom","top","_bgLayer","addChild","_contentLayer","_uiLayer","_subContent","clearAll","removeAllChildren","appendSubContent","layer","_subContentList","push","on","topLayer","length","pop","popSubContent","removeFromParent","destroy","getSubContent","getUILayer","getContentLayer","getBgLayer","isEmpty","childCount","children","setContentLayerVisible","flag","contentLayer","hide","show","getLayerName","name"],"mappings":"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","sourcesContent":["/*\n * @Author: Gino\n * @Date: 2020-09-21 20:14:47\n * @LastEditTime: 2022-03-05 15:09:49\n * @LastEditors: liuguoqing\n */\nimport { log, Node, Widget, widgetManager } from \"cc\";\nimport { TableContentLayer } from \"./TableContentLayer\";\n\nexport class TableLayer extends Node {\n    _bgLayer: Node;\n    _contentLayer: TableContentLayer;\n    _uiLayer: Node;\n    _subContent: Node;\n    _subContentList: Array<Node>;\n\n    constructor() {\n        super();\n\n        //全屏\n        let widget = this.addComponent(Widget)\n        widget!.alignMode = Widget.AlignMode.ON_WINDOW_RESIZE;\n        widget!.alignFlags = widgetManager.AlignFlags.HORIZONTAL | widgetManager.AlignFlags.VERTICAL;\n        widget!.left = 0;\n        widget!.right = 0;\n        widget!.bottom = 0;\n        widget!.top = 0;\n\n        this._bgLayer = new Node();\n        this.addChild(this._bgLayer);\n\n        this._contentLayer = new TableContentLayer();\n        this.addChild(this._contentLayer);\n\n        this._uiLayer = new Node();\n        this.addChild(this._uiLayer);\n\n        this._subContent = new Node();\n        this.addChild(this._subContent);\n    }\n\n    clearAll() {\n        this._bgLayer.removeAllChildren();\n        this._contentLayer.clearAll();\n        this._uiLayer.removeAllChildren();\n        this._subContent.removeAllChildren();\n    }\n\n    appendSubContent(layer: Node) {\n        this._subContent.addChild(layer);\n        this._subContentList.push(layer);\n\n        layer.on(\"exit\", () => {\n            // 如果发现顶层没有pop掉就pop一下\n            let topLayer = this._subContentList[\n                this._subContentList.length - 1\n            ];\n            if (topLayer == layer) {\n                this._subContentList.pop();\n            }\n        });\n    }\n\n    popSubContent(): boolean {\n        let layer = this._subContentList.pop();\n        if (layer != null) {\n            layer.removeFromParent();\n            layer.destroy();\n            return true;\n        }\n\n        return false;\n    }\n\n    getSubContent() {\n        return this._subContent;\n    }\n\n    getUILayer() {\n        return this._uiLayer;\n    }\n\n    getContentLayer() {\n        return this._contentLayer;\n    }\n\n    getBgLayer() {\n        return this._bgLayer;\n    }\n\n    isEmpty() {\n        let childCount =\n            this._uiLayer.children.length +\n            this._contentLayer.children.length +\n            this._bgLayer.children.length +\n            this._subContent.children.length;\n        return 0 >= childCount;\n    }\n\n    setContentLayerVisible(flag: boolean) {\n        let contentLayer = this.getContentLayer();\n        if (flag == false) {\n            contentLayer.hide();\n        } else {\n            contentLayer.show();\n        }\n    }\n\n    getLayerName() {\n        if (this._subContent.name != \"New Node\") {\n            return this._subContent.name;\n        }\n\n        if (this._contentLayer.name != \"New Node\") {\n            return this._contentLayer.name;\n        }\n\n        if (this._uiLayer.name != \"New Node\") {\n            return this._uiLayer.name;\n        }\n\n        if (this._bgLayer.name != \"New Node\") {\n            return this._bgLayer.name;\n        }\n    }\n}\n"]}