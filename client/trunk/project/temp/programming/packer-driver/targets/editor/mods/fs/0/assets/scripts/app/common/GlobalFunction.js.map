{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/common/GlobalFunction.ts"],"names":["director","gameMgr","sceneMgr","dataMgr","ViewProtocol","showDoubleBtnDialog","args","getScene","name","sendCreateView","DoubleBtnDialog","getConfig","dataHandlerName","namekey","getData","getModel","modelConstructor","showMsgTips","tips","Tips","showNotice","callback","url","NoticeView","G"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,Q,OAAAA,Q;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,O,iBAAAA,O;;AAIAC,MAAAA,Y,iBAAAA,Y;;;;;;;;AAQE,iBAASC,mBAAT,CAA6BC,IAA7B,EAA0D;AAC7D;AACA,cAAIN,QAAQ,CAACO,QAAT,GAAoBC,IAApB,IAA4B,MAAhC,EAAwC;AACpC;AAAA;AAAA,sCAASC,cAAT,CAAwB;AAAA;AAAA,8CAAaC,eAArC,EAAsDJ,IAAtD;AACH,WAJ4D,CAK7D;AACA;AACA;AACA;;AACH;;;;AAMM,iBAASK,SAAT,CAAgEC,eAAhE,EAA4FC,OAA5F,EAAoH;AACvH,iBAAO;AAAA;AAAA,kCAAQC,OAAR,CAAgBF,eAAhB,EAAgCC,OAAhC,CAAP;AACH;;;;AAOM,iBAASE,QAAT,CAAuCC,gBAAvC,EAA0F;AAC7F,iBAAO;AAAA;AAAA,kCAAQD,QAAR,CAAiBC,gBAAjB,CAAP;AACH;;;;AAEM,iBAASC,WAAT,CAAqBC,IAArB,EAAkC;AACrC;AAAA;AAAA,oCAAST,cAAT,CAAwB;AAAA;AAAA,4CAAaU,IAArC,EAA2CD,IAA3C;AACH;;;;AAGM,iBAASE,UAAT,CAAoBC,QAApB,EAAyC;AAChD,cAAIC,GAAG,GAAI,sCAAX,CADgD,CAEhD;AACA;AACA;AACA;AACA;AACA;AACI;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQ;AAAA;AAAA,oCAASb,cAAT,CAAwB;AAAA;AAAA,4CAAac,UAArC,EAAiD,CAACD,GAAD,EAAMD,QAAN,CAAjD,EApBgC,CAqBxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACJ;AACI;AACJ;AACJ;AACH;;;SAtEgBG,C,iBAAAA,C","sourcesContent":["// import { dataMgr, gameMgr, ModelBase } from \"../../framework/yy\";\nimport { director, log } from \"cc\";\nimport { gameMgr } from \"../../framework/core/GameMgr\";\nimport { sceneMgr } from \"../../framework/core/SceneMgr\";\nimport { dataMgr } from \"../../framework/data/DataMgr\";\nimport { ModelBase } from \"../../framework/data/ModelBase\";\nimport { httpMgr } from \"../../framework/net/HttpMgr\";\nimport { DoubleBtnDialogArgsType} from \"../define/ConfigType\";\nimport { ViewProtocol } from \"../define/ViewProtocol\";\nimport { yy } from \"../define/YYNamespace\";\n\n\n/**\n * 通用全局函数\n */\nexport namespace G {\n    export function showDoubleBtnDialog(args:DoubleBtnDialogArgsType){\n        //主场景\n        if (director.getScene().name == \"Main\") {\n            sceneMgr.sendCreateView(ViewProtocol.DoubleBtnDialog, args);\n        }\n        // } else {\n        //     let msgData = new SFMessage(ViewFlags.DoubleBtnDialog, args);\n        //     LoaderEventMgr.getInstance().dispatchEvent(msgData);\n        // }\n    }\n    /**\n     * \n     * @param dataHandlerName 注册的hand name\n     * @param namekey?:string|number 索引值\n     */\n    export function getConfig<TMoudleName extends yy.types.DataModuleName>(dataHandlerName:TMoudleName,namekey?:string|number) {\n        return dataMgr.getData(dataHandlerName,namekey);\n    }\n\n    /**\n     * \n     * @param mdoelName model的名称\n     * @returns 获取model\n     */\n    export function getModel<T extends ModelBase>(modelConstructor: yy.types.CommonConstructor<T>):T {\n        return gameMgr.getModel(modelConstructor);\n    }\n\n    export function showMsgTips(tips:string) {\n        sceneMgr.sendCreateView(ViewProtocol.Tips, tips)\n    }\n\n    // 公告\n    export function showNotice(callback?: Function) {\n    let url = `http://192.168.0.122:8080/notice.jpg`;\n    // {\n    //   \"html_id\": 1, // 实际html id\n    //   \"start\": 1590935388, // 开始时间\n    //   \"end\": 1626767612 // 结束时间\n    //  }\n    // httpMgr.get((msg) => {\n        // log(msg)\n        // if (msg.code == 0) {\n            // if (msg.data.start) {\n            //     var date = new Date();\n            //     let curTime = date.getTime() / 1000;\n            //     let realVer = GameConfig.realVer || \"0.0\";\n            //     //获取成功\n            //     if (\n            //         realVer == msg.data.version &&\n            //         curTime > msg.data.start &&\n            //         curTime < msg.data.end\n            //     ) {\n                    sceneMgr.sendCreateView(ViewProtocol.NoticeView, [url, callback]);\n            //     } else {\n            //         if (callback) {\n            //             callback();\n            //         }\n            //     }\n            // } else {\n            //     if (callback) {\n            //         callback();\n            //     }\n                // GlobalFunction.ShowMsgTips(GetTranslateCode(29));\n            // }\n        // } else {\n            // GlobalFunction.ShowMsgTips(GetTranslateCode(29));\n        // }\n    // }, url);\n}\n}\n\n"]}