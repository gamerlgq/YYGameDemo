{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/app/views/fight/data/FightDataBase.ts"],"names":["FightPlayerDataBase","FightFormationDataBase","FightDataBase","constructor","params","_info","getPlayerId","getPlayerName","getPlayerLvl","getIsPlayer","getPlayerBattleValue","getFormationIndex","getHeroId","getHeroCurHp","getHeroTopHp","getHeroBattleValue","data","Array","json","_fightData","_attackData","p","_defendData","m","forEach","element","_attackFormationData","push","_defendFormationData","getAttackPlayerData","getDefendPlayerData","getAttackFormationDatas","getDefendFormationDatas","getFightResult","rl","getFightReprotType","t","getRoundData","r"],"mappings":"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","sourcesContent":["import { JsonAsset } from \"cc\"\n\nexport class FightPlayerDataBase {\n\n    // 玩家信息[玩家ID，玩家名字，玩家等级，是否为玩家，战力,...]\n    private _info:any = null;\n\n    constructor(params:any) {\n        this._info = params;\n    }\n\n    getPlayerId():number{\n        return this._info[0]??-1;\n    }\n\n    getPlayerName():string{\n        return this._info[1]??\"\";\n    }\n\n    getPlayerLvl():number{\n        return this._info[2]??-1;\n    }\n\n    getIsPlayer():boolean{\n        return this._info[3]??false;\n    }\n\n    getPlayerBattleValue():number{\n        return this._info[4]??-1\n    }\n}\n\nexport class FightFormationDataBase {\n    // 玩家信息[阵位置索引,武将id,当前hp,总hp,武将战力,...]\n    private _info:any = null;\n\n    constructor(params:any) {\n        this._info = params;\n    }\n\n    getFormationIndex():number{\n        return this._info[0]??-1;\n    }\n\n    getHeroId():number{\n        return this._info[1]??-1;\n    }\n\n    getHeroCurHp():number{\n        return this._info[2]??-1;\n    }\n\n    getHeroTopHp():number{\n        return this._info[3]??-1;\n    }\n\n    getHeroBattleValue():number{\n        return this._info[4]??-1\n    }\n}\n\nexport class FightDataBase {\n    \n    private _fightData:any = null;\n\n    // 对战双方信息\n    private _attackData:FightPlayerDataBase = null;\n    private _defendData:FightPlayerDataBase = null;\n\n    // 对战布阵信息\n    private _attackFormationData:Array<FightFormationDataBase> = new Array<FightFormationDataBase>();\n    private _defendFormationData:Array<FightFormationDataBase> = new Array<FightFormationDataBase>();\n\n    //p: 对战双方信息:p[0]攻方信息,p[1]守方信息\n    // m:Array<number>对战布阵信息:m[0]攻方信息,m[1]守方信息\n    //r:Array<number>//每回合描述[[大回合1的描述],...],每个大回合的行动描述[[行动1],...]\n    //rl:number //战斗结果 0功方胜利 1守方胜利\n    //t:number //战报类型\n    constructor(data:JsonAsset) {\n        let json = data.json;\n        this._fightData = json;\n\n        this._attackData = new FightPlayerDataBase(this._fightData!.p[0]);\n        this._defendData = new FightPlayerDataBase(this._fightData!.p[1]);\n\n        this._fightData!.m[0].forEach(element => {\n            let data = new FightFormationDataBase(element);\n            this._attackFormationData.push(data);\n        });\n\n        this._fightData!.m[1].forEach(element => {\n            let data = new FightFormationDataBase(element);\n            this._defendFormationData.push(data);\n        });\n        \n    }\n\n    /**\n     * \n     * @returns 返回攻方玩家信息\n     */\n    public getAttackPlayerData():FightPlayerDataBase{\n        return this._attackData;\n    }\n\n    /**\n     * \n     * @returns 返回守方玩家信息\n     */\n    public getDefendPlayerData():FightPlayerDataBase{\n        return this._defendData;\n    }\n\n    /**\n     * \n     * @returns 返回攻方布阵信息\n     */\n    public getAttackFormationDatas():Array<FightFormationDataBase>{\n        return this._attackFormationData;\n    }\n\n    /**\n     * \n     * @returns 返回守方布阵信息\n     */\n    public getDefendFormationDatas():Array<FightFormationDataBase>{\n        return this._defendFormationData;\n    }\n\n    /**\n     * \n     * @returns 返回战斗结果\n     */\n    public getFightResult(){\n        return this._fightData!.rl;  \n    }\n\n    /**\n     * \n     * @returns 返回战报类型\n     */\n    public getFightReprotType(){\n        return this._fightData!.t;        \n    }\n\n    /**\n     * \n     * @returns 返回回合集合\n     */\n    public getRoundData():Array<Array<any>>{\n        return this._fightData!.r;\n    }\n}"]}