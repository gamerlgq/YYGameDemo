{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/views/fight/action/ActionSpineAnim.ts"],"names":["ActionSpineAnim","tween","ActionBase","play","data","callback","node","own","config","animCfg","params","actionName","isLoop","_callback","setAnimateEndCallback","_done","bind","call","trackEntry","done"],"mappings":";;;iDAMaA,e;;;;;;;;;;;;;;;;;;;;;;;AANkBC,MAAAA,K,OAAAA,K;;AAGtBC,MAAAA,U,iBAAAA,U;;;;;;;iCAGIF,e,GAAN,MAAMA,eAAN;AAAA;AAAA,oCAAwC;AAAA;AAAA;;AAAA,6CAEe,IAFf;AAAA;;AAI3C;AACJ;AACA;AACA;AACIG,QAAAA,IAAI,CAACC,IAAD,EAAsBC,QAAtB,EAAkF;AAClF,cAAIC,IAAI,GAAGF,IAAI,CAACG,GAAhB;AACA,cAAIC,MAAM,GAAGJ,IAAI,CAACK,OAAlB;AACA,cAAIC,MAAM,GAAGF,MAAM,CAACE,MAApB;AACA,cAAIC,UAAU,GAAGD,MAAM,CAAC,CAAD,CAAvB;AACA,cAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;AACA,eAAKG,SAAL,GAAiBR,QAAjB;AACAC,UAAAA,IAAI,CAACQ,qBAAL,CAA2B,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAA3B;AACA,iBAAOf,KAAK,CAACK,IAAD,CAAL,CAAYW,IAAZ,CAAiB,MAAI;AACxBX,YAAAA,IAAI,CAACH,IAAL,CAAUQ,UAAV,EAAqBC,MAArB;AACH,WAFM,CAAP;AAGH;;AAEOG,QAAAA,KAAK,CAACG,UAAD,EAAiC;AAC1C,cAAI,KAAKL,SAAT,EAAmB;AACf,iBAAKA,SAAL,CAAeK,UAAf;AACH;;AACD,eAAKC,IAAL;AACH;;AAEDA,QAAAA,IAAI,GAAS,CAEZ;;AA9B0C,O","sourcesContent":["import { log, Node, sp, Tween, tween } from \"cc\";\nimport { yy } from \"../../../define/YYNamespace\";\nimport { fightBloodMgr } from \"../FightBloodMgr\";\nimport { ActionBase } from \"./ActionBase\";\nimport { FightActionData } from \"./FightActionMgr\";\n\nexport class ActionSpineAnim extends ActionBase{\n\n    private _callback:yy.interfaces.SpineTrackEntryCallFunc = null;\n\n    /**\n     * \n     * @param data FightActionData\n     */\n    play(data:FightActionData,callback?:yy.interfaces.SpineTrackEntryCallFunc):Tween<Node>{\n        let node = data.own;\n        let config = data.animCfg;\n        let params = config.params\n        let actionName = params[0];\n        let isLoop = params[1];\n        this._callback = callback;\n        node.setAnimateEndCallback(this._done.bind(this));\n        return tween(node).call(()=>{\n            node.play(actionName,isLoop);\n        });\n    }    \n\n    private _done(trackEntry:sp.spine.TrackEntry) {\n        if (this._callback){\n            this._callback(trackEntry);\n        }\n        this.done();\n    }\n\n    done(): void {\n        \n    }\n}"]}