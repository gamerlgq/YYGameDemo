{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/app/views/fight/FightPlayer.ts"],"names":["FightPlayer","Singleton","FightEvent","fightEventMgr","FightConstant","fightPlayer","init","getInstance","_init","_initListeners","addEventListener","Action_Star","_onActionStart","bind","event","data","getEventData","action","Action","actionData","ActionData","_prase","who","attack","result","args","Who","Attack","Result","send","Attack_Start","Result_Start","replay","Game_Replay","pause","Game_Pause","resume","Game_Resume","skip","Game_End","destory","destoryInstance","clear"],"mappings":";;;mFAWaA,W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVJC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;6BAEEC,W,GAA0B,I;AACrC;AACA;AACA;;;6BACaL,W,GAAN,MAAMA,WAAN;AAAA;AAAA,kCAAmC;AAEpB,eAAJM,IAAI,GAAE;AAChB,iCAAAD,WAAW,GAAGL,WAAW,CAACO,WAAZ,EAAd;;AACAF,UAAAA,WAAW,CAACG,KAAZ;AACH;;AAEOA,QAAAA,KAAK,GAAG;AACZ,eAAKC,cAAL;AACH;;AAEOA,QAAAA,cAAc,GAAG;AACrB;AAAA;AAAA,8CAAcC,gBAAd,CAA+B;AAAA;AAAA,8CAAcR,UAAd,CAAyBS,WAAxD,EAAoE,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAApE;AACH,SAbqC,CAetC;;;AACQD,QAAAA,cAAc,CAACE,KAAD,EAAmB;AACrC,cAAIC,IAAoC,GAAGD,KAAK,CAACE,YAAN,EAA3C;AACA,cAAIC,MAAM,GAAGF,IAAI,CAACG,MAAlB;AACA,cAAIC,UAAU,GAAGJ,IAAI,CAACK,UAAtB;;AACA,eAAKC,MAAL,CAAYJ,MAAZ,EAAmBE,UAAnB;AACH,SArBqC,CAuBtC;;;AACQE,QAAAA,MAAM,CAACJ,MAAD,EAAeF,IAAf,EAAyB;AACnC;AACA,cAAIO,GAAG,GAAGP,IAAI,CAAC,CAAD,CAAd;AACA,cAAIQ,MAAM,GAAGR,IAAI,CAAC,CAAD,CAAjB;AACA,cAAIS,MAAM,GAAGT,IAAI,CAAC,CAAD,CAAjB;AACA,cAAIU,IAAmC,GAAG;AACtCC,YAAAA,GAAG,EAAEJ,GADiC;AAEtCK,YAAAA,MAAM,EAAEJ,MAF8B;AAGtCK,YAAAA,MAAM,EAAEJ;AAH8B,WAA1C;AAKA;AAAA;AAAA,8CAAcK,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyB4B,YAAxC,EAAqDL,IAArD,CAAnB;AACA;AAAA;AAAA,8CAAcI,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyB6B,YAAxC,EAAqDN,IAArD,CAAnB;AACH,SApCqC,CAsCtC;;;AACOO,QAAAA,MAAM,GAAE;AACX;AAAA;AAAA,8CAAcH,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyB+B,WAAxC,EAAoD,IAApD,CAAnB;AACH,SAzCqC,CA2CtC;;;AACOC,QAAAA,KAAK,GAAE;AACV;AAAA;AAAA,8CAAcL,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyBiC,UAAxC,EAAmD,IAAnD,CAAnB;AACH,SA9CqC,CAgDtC;;;AACOC,QAAAA,MAAM,GAAE;AACX;AAAA;AAAA,8CAAcP,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyBmC,WAAxC,EAAoD,IAApD,CAAnB;AACH,SAnDqC,CAqDtC;;;AACOC,QAAAA,IAAI,GAAE;AACT;AAAA;AAAA,8CAAcT,IAAd,CAAmB;AAAA;AAAA,wCAAe;AAAA;AAAA,8CAAc3B,UAAd,CAAyBqC,QAAxC,EAAiD,IAAjD,CAAnB;AACH;;AAEMC,QAAAA,OAAO,GAAE;AACZxC,UAAAA,WAAW,CAACyC,eAAZ;AACH;;AAEMC,QAAAA,KAAK,GAAE;AACV,iCAAArC,WAAW,GAAG,IAAd;AACH;;AAhEqC,O","sourcesContent":["import { log } from \"cc\";\nimport { Singleton } from \"../../../framework/components/Singleton\";\nimport { FightEvent } from \"./event/FightEvent\";\nimport { FightEventDataType } from \"./event/FightEventDataType\";\nimport { fightEventMgr } from \"./event/FightEventMgr\";\nimport { FightConstant } from \"./FightConstant\";\n\nexport let fightPlayer:FightPlayer = null;\n/**\n * @description 播放器 \n * */\nexport class FightPlayer extends Singleton{\n\n    public static init(){\n        fightPlayer = FightPlayer.getInstance<FightPlayer>();\n        fightPlayer._init();\n    }\n\n    private _init() {\n        this._initListeners();\n    }\n\n    private _initListeners() {\n        fightEventMgr.addEventListener(FightConstant.FightEvent.Action_Star,this._onActionStart.bind(this));\n    }\n\n    // 行动开始\n    private _onActionStart(event:FightEvent) {\n        let data:FightEventDataType.Action_Start = event.getEventData();\n        let action = data.Action;\n        let actionData = data.ActionData;\n        this._prase(action,actionData);\n    }\n\n    // 解析行动\n    private _prase(action:number,data:any) {\n        //data[[谁],[攻击描述],[结果描述]]\n        let who = data[0];\n        let attack = data[1];\n        let result = data[2];\n        let args:FightEventDataType.Action_Data = {\n            Who: who,\n            Attack: attack,\n            Result: result\n        }\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Attack_Start,args));\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Result_Start,args));\n    }\n\n    // 重播\n    public replay(){\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Game_Replay,null))\n    }\n\n    // 暂停\n    public pause(){\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Game_Pause,null))\n    }\n\n    // 继续\n    public resume(){\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Game_Resume,null))\n    }\n\n    // 直接结束游戏\n    public skip(){\n        fightEventMgr.send(new FightEvent(FightConstant.FightEvent.Game_End,null))\n    }\n\n    public destory(){\n        FightPlayer.destoryInstance();\n    }\n\n    public clear(){\n        fightPlayer = null;\n    }\n}"]}