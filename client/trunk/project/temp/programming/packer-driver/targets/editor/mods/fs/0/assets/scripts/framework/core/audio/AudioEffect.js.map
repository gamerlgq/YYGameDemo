{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/framework/core/audio/AudioEffect.ts"],"names":["AudioClip","AudioSource","_decorator","ResourcesLoader","ccclass","menu","AudioEffect","Map","load","url","callback","data","effects","set","playOneShot","volume","release","key","clear"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAoBC,MAAAA,U,OAAAA,U;;AAC/BC,MAAAA,e,iBAAAA,e;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAoBH,U;AAE1B;AACA;AACA;;AAEA;;6BAEaI,W,WADZF,OAAO,CAAC,aAAD,C,yBAAR,MACaE,WADb,SACiCL,WADjC,CAC6C;AAAA;AAAA;;AAAA,2CACC,IAAIM,GAAJ,EADD;AAAA;;AAGlCC,QAAAA,IAAI,CAACC,GAAD,EAAcC,QAAd,EAAmC;AAC1C;AAAA;AAAA,kDAAgBF,IAAhB,CAAqBC,GAArB,EAA0BE,IAAD,IAAkB;AACvC,iBAAKC,OAAL,CAAaC,GAAb,CAAiBJ,GAAjB,EAAsBE,IAAtB;AACA,iBAAKG,WAAL,CAAiBH,IAAjB,EAAuB,KAAKI,MAA5B;AACAL,YAAAA,QAAQ,IAAIA,QAAQ,EAApB;AACH,WAJD,EAIEV,SAJF;AAKH;;AAEDgB,QAAAA,OAAO,GAAG;AACN,eAAK,IAAIC,GAAT,IAAgB,KAAKL,OAArB,EAA8B;AAC1B;AAAA;AAAA,oDAAgBI,OAAhB,CAAwBC,GAAxB;AACH;;AACD,eAAKL,OAAL,CAAaM,KAAb;AACH;;AAhBwC,O","sourcesContent":["import { AudioClip, AudioSource, error, _decorator } from 'cc';\r\nimport { ResourcesLoader } from '../../data/ResourcesLoader';\r\nconst { ccclass, menu } = _decorator;\r\n\r\n/**\r\n * 注：用playOneShot播放的音乐效果，在播放期间暂时没办法即时关闭音乐\r\n */\r\n\r\n/** 游戏音效 */\r\n@ccclass('AudioEffect')\r\nexport class AudioEffect extends AudioSource {\r\n    private effects: Map<string, AudioClip> = new Map<string, AudioClip>();\r\n\r\n    public load(url: string, callback?: Function) {\r\n        ResourcesLoader.load(url,(data:AudioClip)=>{\r\n            this.effects.set(url, data);\r\n            this.playOneShot(data, this.volume);\r\n            callback && callback();\r\n        },AudioClip)\r\n    }\r\n\r\n    release() {\r\n        for (let key in this.effects) {\r\n            ResourcesLoader.release(key);\r\n        }\r\n        this.effects.clear();\r\n    }\r\n}\r\n"]}