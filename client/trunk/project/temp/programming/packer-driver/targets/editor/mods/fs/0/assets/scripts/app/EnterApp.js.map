{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/GameDemoReal/assets/scripts/app/EnterApp.ts"],"names":["EnterApp","Camera","director","find","game","input","log","sys","singletonMgr","audioMgr","gameMgr","sceneMgr","netLoadingMgr","GameConfig","dataRegisterMgr","ViewProtocol","viewRegisterMgr","modelRegisterMgr","constructor","run","init","loadDefine","loadAllDataFile","initSDKHelper","reRun","destoryAll","scene","getScene","stopAll","loadScene","setApp","uiCamera","getChildByName","getComponent","setCamera","fightCamera","registerAllCreator","loadAllData","loadAllModel","loadAllRedGuide","done","frameRate","setAccelerometerEnabled","sendCreateView","LoginLayer","SDKHelper","isNative","SDKLogin","os","OS","IOS","ANDROID"],"mappings":"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","sourcesContent":["import { Camera, director, find, game, input, log, sys } from \"cc\";\nimport { singletonMgr } from \"../framework/components/SingletonMgr\";\nimport { audioMgr } from \"../framework/core/audio/AudioManager\";\nimport { gameMgr } from \"../framework/core/GameMgr\";\nimport { sceneMgr } from \"../framework/core/SceneMgr\";\nimport { languageManager, LanguageManager } from \"../framework/language/Language\";\nimport { netLoadingMgr } from \"../framework/net/NetLoadingMgr\";\nimport { translateMgr } from \"../framework/translate/TranslateMgr\";\nimport { GameConfig } from \"../GameConfig\";\nimport { dataRegisterMgr } from \"./define/DataRegisterMgr\";\nimport { ViewProtocol } from \"./define/ViewProtocol\";\nimport { viewRegisterMgr } from \"./define/ViewRegisterMgr\";\nimport { modelRegisterMgr } from \"./model/ModelRegisterMgr\";\n\n/*\n * @Author: liuguoqing\n * @Date: 2022-03-02 16:36:11\n * @LastEditors: liuguoqing\n * @LastEditTime: 2022-03-02 18:00:01\n * @Description: file content\n */\nexport class EnterApp {\n    constructor() {\n        this.run();\n    }\n\n    run() {\n        this.init();\n        this.loadDefine();\n        this.loadAllDataFile();\n        this.initSDKHelper();\n    }\n\n    reRun() {\n        singletonMgr.destoryAll();\n        let scene = director.getScene();\n        audioMgr.stopAll()\n        // let main = scene.getComponentInChildren(\"Main\");\n        // gameMgr.setCamera(\"default\", main.defaultCamera);\n        // gameMgr.setCamera(\"fight\", main.fightCamera);\n        // this.run();\n        director.loadScene(\"HotUpdate\");\n    }\n\n    init() {\n        sceneMgr.init();\n        gameMgr.setApp(this);\n        audioMgr.init();\n        netLoadingMgr.init()\n        //玩家ID，保存音效设置\n        // audioMgr.setUuid(\"3998857\")\n\n        let uiCamera = find(\"Canvas\")?.getChildByName(\"UICamera\")?.getComponent(Camera);\n        gameMgr.setCamera(\"UICamera\",uiCamera);\n\n        let fightCamera = find(\"Canvas\")?.getChildByName(\"MainCamera\")?.getComponent(Camera);\n        gameMgr.setCamera(\"MainCamera\",fightCamera);\n    }\n\n    loadDefine() {\n        viewRegisterMgr.registerAllCreator();\n    }\n\n    loadAllDataFile() {\n        log(\"loading config..\");\n        // logDot(DotIDS.configLoadingStart);\n        dataRegisterMgr.loadAllData(() => {\n            log(\"loading config is done\");\n            // logDot(DotIDS.configLoadingFinish);\n            this.loadAllModel();\n            this.loadAllRedGuide();\n            this.done();\n        });\n    }\n\n    loadAllRedGuide() {\n        // RedGuideReg.loadAllRedGuide();\n    }\n\n    loadAllModel() {\n        modelRegisterMgr.loadAllModel();\n    }\n\n    done() {\n        // if (cc.sys.isMobile) {\n        //     cc.macro.ENABLE_MULTI_TOUCH = false;\n        // }\n        \n        game.frameRate = 60;\n        input.setAccelerometerEnabled(true);\n        log(\"进入游戏\");\n        \n        sceneMgr.sendCreateView(ViewProtocol.LoginLayer);\n    }\n\n    initSDKHelper() {\n        let SDKHelper;\n        if (sys.isNative && GameConfig.SDKLogin) {\n            if (sys.os == sys.OS.IOS) {\n        //         let content = require(\"../SDK/SDKIosHelper\");\n        //         SDKHelper = content.SDKHelper;\n        //         window[\"SDKHelper\"] = SDKHelper.getInstance();\n            } else if (sys.os == sys.OS.ANDROID) {\n        //         let content = require(\"../SDK/SDKAndroidHelper\");\n        //         SDKHelper = content.SDKHelper;\n        //         window[\"SDKHelper\"] = SDKHelper.getInstance();\n        //         window[\"SDKHelper\"].SDKInit();\n            }\n        }\n    }\n}"]}