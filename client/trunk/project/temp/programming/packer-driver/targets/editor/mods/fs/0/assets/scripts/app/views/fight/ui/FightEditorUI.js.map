{"version":3,"sources":["file:///Users/steven/Workspaces/CocosCreatorProjects/3D/YYGameDemo/client/trunk/project/assets/scripts/app/views/fight/ui/FightEditorUI.ts"],"names":["_decorator","Component","ScrollView","Label","ProgressBar","log","ListView","FightConstant","ccclass","property","FightEditorUI","start","_initScrollView","items","FightUnitActionString","keys","Object","delegate","reuse","itemNode","item","label","getChildByName","lblCom","getComponent","string","listViewComp","scrollView","setDelegate","reload","node","active","onUnitActionShowBtnClick","_isShowActionOption","_showActionItems","_hideActionItems","onUnitActionBtnClick","event","customEventData","getCurrentTarget","onClickAttacker","_attaker","_showFingerEffect","onClickDefender","_defender","onClickClear"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,K,OAAAA,K;AAAmBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,G,OAAAA,G;;AACjFC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,a,iBAAAA,a;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;+BAGjBU,a,WADZF,OAAO,CAAC,eAAD,C,UAGHC,QAAQ,CAACP,UAAD,C,UAGRO,QAAQ,CAACL,WAAD,C,oCANb,MACaM,aADb,SACmCT,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,uDAQH,KARG;;AAAA,4CAUW,IAVX;;AAAA,6CAYY,IAZZ;AAAA;;AAczCU,QAAAA,KAAK,GAAI;AACL,eAAKC,eAAL;AACH;;AAEOA,QAAAA,eAAe,GAAG;AACtB,cAAIC,KAAK,GAAG;AAAA;AAAA,8CAAcC,qBAA1B;AACA,cAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,KAAZ,CAAX;AACA,cAAII,QAAiC,GAAI;AACrCJ,YAAAA,KAAK,EAAE,YAAsB;AACzB,qBAAOE,IAAP;AACH,aAHoC;;AAKrCG,YAAAA,KAAK,CAACC,QAAD,EAAiBC,IAAjB,EAA8B;AAC/B,kBAAIC,KAAK,GAAGF,QAAQ,CAACG,cAAT,CAAwB,OAAxB,CAAZ;AACA,kBAAIC,MAAM,GAAGF,KAAK,CAACG,YAAN,CAAmBrB,KAAnB,CAAb;AACAoB,cAAAA,MAAM,CAACE,MAAP,GAAgBL,IAAhB;AACH;;AAToC,WAAzC;AAYA,cAAIM,YAAY,GAAG,KAAKC,UAAL,CAAgBH,YAAhB;AAAA;AAAA,mCAAnB;AACAE,UAAAA,YAAY,CAACE,WAAb,CAAyBX,QAAzB;AACAS,UAAAA,YAAY,CAACG,MAAb;AAEA,eAAKF,UAAL,CAAgBG,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACH;;AAGDC,QAAAA,wBAAwB,GAAE;AACtB,eAAKC,mBAAL,GAA2B,CAAC,KAAKA,mBAAjC;;AACA,cAAI,KAAKA,mBAAT,EAA6B;AACzB,iBAAKC,gBAAL;AACH,WAFD,MAEK;AACD,iBAAKC,gBAAL;AACH;AACJ;;AAEOD,QAAAA,gBAAgB,GAAG;AACvB,eAAKP,UAAL,CAAgBG,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACH;;AAEOI,QAAAA,gBAAgB,GAAG;AACvB,eAAKR,UAAL,CAAgBG,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACH;;AAEDK,QAAAA,oBAAoB,CAACC,KAAD,EAAkBC,eAAlB,EAAyC;AACzD,cAAIR,IAAI,GAAGO,KAAK,CAACE,gBAAN,EAAX;AACAlC,UAAAA,GAAG,CAACyB,IAAD,CAAH;AACH;;AAEDU,QAAAA,eAAe,CAACH,KAAD,EAAkBC,eAAlB,EAAyC;AACpD,cAAI,CAAC,KAAKG,QAAV,EAAoB;AAChB,iBAAKC,iBAAL;AACH;AACJ;;AAEDC,QAAAA,eAAe,CAACN,KAAD,EAAkBC,eAAlB,EAAyC;AACpD,cAAI,CAAC,KAAKM,SAAV,EAAqB;AACjB,iBAAKF,iBAAL;AACH;AACJ;;AAEOA,QAAAA,iBAAiB,GAAG,CAE3B;;AAEDG,QAAAA,YAAY,GAAE,CAEb;;AAjFwC,O;;;;;iBAGjB,I;;;;;;;iBAGF,I","sourcesContent":["\nimport { _decorator, Component, Node, ScrollView, Button, Label, EventTouch, ProgressBar, log } from 'cc';\nimport { ListView, ListViewDelegate } from '../../../../framework/ui/ListView';\nimport { HeroSpineNode, MonsterSpineNode } from '../../common/spine/SpineNodeBase';\nimport { FightConstant } from '../FightConstant';\nconst { ccclass, property } = _decorator;\n\n@ccclass('FightEditorUI')\nexport class FightEditorUI extends Component {\n    \n    @property(ScrollView)\n    scrollView:ScrollView = null;\n\n    @property(ProgressBar)\n    fullBar:ProgressBar = null;\n\n    private _isShowActionOption:boolean = false;\n\n    private _attaker:HeroSpineNode | MonsterSpineNode = null;\n\n    private _defender:HeroSpineNode | MonsterSpineNode = null;\n\n    start () {\n        this._initScrollView();\n    }\n\n    private _initScrollView() {\n        let items = FightConstant.FightUnitActionString;\n        let keys = Object.keys(items);\n        let delegate:ListViewDelegate<string>  = {\n            items: function (): string[] {\n                return keys\n            },\n\n            reuse(itemNode: Node, item: string){\n                let label = itemNode.getChildByName(\"Label\");\n                let lblCom = label.getComponent(Label);\n                lblCom.string = item;\n            }\n        }\n\n        let listViewComp = this.scrollView.getComponent(ListView);\n        listViewComp.setDelegate(delegate);\n        listViewComp.reload();\n\n        this.scrollView.node.active = false;\n    }\n\n\n    onUnitActionShowBtnClick(){\n        this._isShowActionOption = !this._isShowActionOption;\n        if (this._isShowActionOption){\n            this._showActionItems();\n        }else{\n            this._hideActionItems();\n        }\n    }\n\n    private _showActionItems() {\n        this.scrollView.node.active = true;\n    }\n\n    private _hideActionItems() {\n        this.scrollView.node.active = false;\n    }\n\n    onUnitActionBtnClick(event:EventTouch,customEventData:string){\n        let node = event.getCurrentTarget();\n        log(node);\n    }\n\n    onClickAttacker(event:EventTouch,customEventData:string){\n        if (!this._attaker) {\n            this._showFingerEffect();\n        }\n    }\n\n    onClickDefender(event:EventTouch,customEventData:string){\n        if (!this._defender) {\n            this._showFingerEffect();\n        }\n    }\n\n    private _showFingerEffect() {\n        \n    }\n\n    onClickClear(){\n\n    }\n}"]}